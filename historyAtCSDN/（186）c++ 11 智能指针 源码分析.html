
                                            <p>&#x539F;&#x6587;&#x5730;&#x5740;&#xFF1A;<a href="https://blog.csdn.net/zy19940906/article/details/50470087" rel="nofollow" data-token="0c31d2ee0c62ad0bfcb663f6704de139">&#x70B9;&#x51FB;&#x6253;&#x5F00;&#x94FE;&#x63A5;</a></p><p><br></p><p></p><div id="article_content" class="article_content" style="font-family:&apos;-apple-system&apos;, &apos;SF UI Text&apos;, Arial, &apos;PingFang SC&apos;, &apos;Hiragino Sans GB&apos;, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, sans-serif, SimHei, SimSun;font-size:14px;background-color:rgb(255,255,255);line-height:35px;color:rgb(85,85,85);"><p style="font-size:14px;font-family:&apos;microsoft yahei&apos;;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><span style="font-weight:700;">&#x7B80;&#x65AD;&#x622A;&#x8BF4;</span></span><span style="font-family:&apos;Microsoft YaHei&apos;;">&#xFF1A;c++&#x7684;&#x5165;&#x95E8;&#x5751;&#x70B9;&#x5927;&#x5BB6;&#x90FD;&#x662F;&#x6709;&#x76EE;&#x5171;&#x7779;&#x7684;&#xFF0C;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x6307;&#x9488;&#x7684;&#x7406;&#x89E3;&#x4E0D;&#x6DF1;&#x5BFC;&#x81F4;&#x4E00;&#x4E9B;&#x91CE;&#x6307;&#x9488;&#xFF0C;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x7B49;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x4E0D;&#x8D58;&#x8FF0;&#x3002;&#x667A;&#x80FD;&#x6307;&#x9488;&#x6B63;&#x597D;&#x80FD;&#x591F;&#x5F25;&#x8865;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x672C;&#x8D28;&#x662F;&#x5B58;&#x653E;&#x5728;&#x6808;&#x7684;&#x6A21;&#x677F;&#x5BF9;&#x8C61;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x6808;&#x5185;&#x90E8;&#x5305;&#x4E86;&#x4E00;&#x5C42;&#x6307;&#x9488;&#x3002;&#x800C;&#x6808;&#x5728;&#x5176;&#x751F;&#x547D;&#x5468;&#x671F;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x5176;&#x4E2D;&#x7684;&#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5806;&#x5185;&#x5B58;&#x4E5F;&#x81EA;&#x7136;&#x88AB;&#x91CA;&#x653E;&#x4E86;&#x3002;&#x56E0;&#x800C;&#x5B9E;&#x73B0;&#x4E86;&#x667A;&#x80FD;&#x7BA1;&#x7406;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x8003;&#x8651;&#x5185;&#x5B58;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x5176;&#x5B9E;&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x67D0;&#x79CD;&#x5355;&#x4F8B;&#x5199;&#x6CD5;&#xFF0C;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x7ED3;&#x675F;&#xFF0C;&#x4E5F;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x5355;&#x4F8B;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#x95EE;&#x9898;&#x3002;</span></p><p style="font-size:15px;font-family:&apos;microsoft yahei&apos;;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><span style="font-size:14px;">&#xA0; &#xA0; &#xA0;&#x672C;&#x6B21;&#x8BA8;&#x8BBA;&#xFF1A;c++11&#x4E4B;&#x524D;&#x7684;auto_ptr; c++11&#x65B0;&#x52A0;&#x7684;<span style="color:rgb(51,51,51);font-family:&apos;Microsoft YaHei&apos;, Verdana, sans-serif, &apos;&#x5B8B;&#x4F53;&apos;;font-size:12.5px;letter-spacing:.5px;line-height:22.5px;">unique_ptr, shared_ptr&#x4EE5;&#x53CA;weak_ptr&#x3002;</span></span></span></p><p style="font-size:15px;font-family:&apos;microsoft yahei&apos;;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:&apos;Microsoft YaHei&apos;, Verdana, sans-serif, &apos;&#x5B8B;&#x4F53;&apos;;font-size:12.5px;letter-spacing:.5px;line-height:22.5px;">&#xA0; &#xA0; &#xA0;&#x5934;&#x6587;&#x4EF6;&#xFF1A;</span></span></span><span style="font-family:&apos;Microsoft YaHei&apos;;font-size:14px;background-color:rgb(240,240,240);">#include &lt;memory&gt;</span></p><p style="font-size:15px;font-family:&apos;microsoft yahei&apos;;"><span style="font-family:&apos;Microsoft YaHei&apos;;font-size:14px;background-color:rgb(240,240,240);"><br></span></p><h2 style="line-height:26px;font-family:Arial;"><a name="t0"></a><a style="color:rgb(12,137,207);font-size:15px;"></a><a style="color:rgb(12,137,207);font-size:15px;"></a><a style="color:rgb(12,137,207);font-size:15px;"></a><a style="color:rgb(202,0,0);"></a><span style="font-family:&apos;Microsoft YaHei&apos;;">1.auto_ptr</span></h2><p style="font-size:14px;font-family:Arial;"><span style="font-family:&apos;Microsoft YaHei&apos;;">&#xA0; &#xA0; &#xA0; auto_ptr&#x662F;&#x6211;&#x7B2C;&#x4E00;&#x4E2A;&#x770B;&#x7684;&#x667A;&#x80FD;&#x6307;&#x9488;&#xFF0C;&#x4E5F;&#x662F;&#x6807;&#x51C6;&#x5E93;&#x91CC;&#x7684;&#x667A;&#x80FD;&#x6307;&#x9488;&#xFF0C;&#x6709;&#x8BB8;&#x591A;&#x7F3A;&#x9677;&#x3002;</span></p><p style="font-size:14px;font-family:Arial;"><span style="font-family:&apos;Microsoft YaHei&apos;;">&#x9996;&#x5148;&#x770B;&#x4E0B;&#x7ED3;&#x6784;&#xFF1A;</span></p><p style="font-size:14px;font-family:Arial;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><img src="https://img-blog.csdn.net/20160107093540024?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt><br></span></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;">&#x4ECE;&#x56FE;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x4E66;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x6A21;&#x677F;&#xFF0C;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x5927;&#x81F4;&#x7C7B;&#x4F3C;&#x4E8E;vector&#x6A21;&#x677F;&#x3002;&#x5982;&#x4E0B;&#xFF1A;</span></p><p style="font-size:14px;"></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);"></code></pre><ol class="hljs-ln" style="list-style:none;border-collapse:collapse;"><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-class"><span class="hljs-keyword" style="color:rgb(198,120,221);">class</span> <span class="hljs-title" style="color:rgb(230,192,123);">Base1</span></span></div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">{</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">	<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//__int64 ss;</span></div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//public:</span></div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">	<span class="hljs-keyword" style="color:rgb(198,120,221);">bool</span> dd;</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">	<span class="hljs-keyword" style="color:rgb(198,120,221);">int</span> m_itest;</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword" style="color:rgb(198,120,221);">public</span>:</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">	<span class="hljs-function"><span class="hljs-keyword" style="color:rgb(198,120,221);">virtual</span> <span class="hljs-keyword" style="color:rgb(198,120,221);">void</span> <span class="hljs-title" style="color:rgb(97,174,238);">func</span><span class="hljs-params">()</span></span>{</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">		<span class="hljs-built_in" style="color:rgb(230,192,123);">cout</span> &lt;&lt; <span class="hljs-string" style="color:rgb(152,195,121);">&quot;test successed&quot;</span> &lt;&lt; <span class="hljs-built_in" style="color:rgb(230,192,123);">endl</span>;</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">	}</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">};<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//&#x5148;&#x5199;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7C7B;</span></div></div></li></ol><span style="font-size:15px;">main&#x51FD;&#x6570;&#x5982;&#x4E0B;&#xFF1A;</span><p style="font-size:15px;"></p><p style="font-size:14px;"></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);"></code></pre><ol class="hljs-ln" style="list-style:none;border-collapse:collapse;"><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword" style="color:rgb(198,120,221);">int</span> _tmain(<span class="hljs-keyword" style="color:rgb(198,120,221);">int</span> argc, _TCHAR* argv[])</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">{</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">	<span class="hljs-built_in" style="color:rgb(230,192,123);">auto_ptr</span> &lt;Base1&gt; base1(<span class="hljs-keyword" style="color:rgb(198,120,221);">new</span> Base1);<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//&#x53EF;&#x7406;&#x89E3;&#x4E3A;&#x5148;&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;base1&#x7684;Base1&#x7C7B;&#x578B;&#x667A;&#x80FD;&#x6307;&#x9488;&#xFF0C;&#x7136;&#x540E;&#x518D;base1&#x91CC;&#x9762;&#x7BA1;&#x7406;new Base1</span></div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword" style="color:rgb(198,120,221);">if</span> (base1.get())<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//get&#x662F;&#x667A;&#x80FD;&#x6307;&#x9488;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x5F53;&#x524D;&#x667A;&#x80FD;&#x6307;&#x9488;&#x5BF9;&#x8C61;&#xFF0C;&#x5373;&#x7528;&#x4EE5;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x7A7A;</span></div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        {</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">	     base1-&gt;func();</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        }</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword" style="color:rgb(198,120,221);">return</span> <span class="hljs-number" style="color:rgb(209,154,102);">0</span>;</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">}</div></div></li></ol><span style="font-size:15px;">&#x6B63;&#x5E38;&#x7528;&#x6CD5;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x7136;&#x800C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x518D;&#x4ED4;&#x7EC6;&#x7FFB;&#x770B;&#x4E0B;&#x5E95;&#x5C42;&#xFF1A;</span><p style="font-size:15px;"></p><p style="font-size:14px;"><img src="https://img-blog.csdn.net/20160107094513525?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p><p style="font-size:14px;"><span></span>&#x4ECE;&#x4E0A;&#x56FE;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x8BE5;&#x667A;&#x80FD;&#x6307;&#x9488;&#x6210;&#x5458;&#x51FD;&#x6570;&#x4E5F;&#x4E0E;vector&#x76F8;&#x4F3C;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x5F97;&#x51FA;</p><p style="font-size:14px;">1&#x3001;base1.get()&#xFF1A;&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x6307;&#x9488;&#x5BF9;&#x8C61;&#xFF1B;</p><p style="font-size:14px;">2&#x3001;base1.release()&#xFF1A;&#x6E05;&#x7A7A;&#x5F53;&#x524D;&#x667A;&#x80FD;&#x6307;&#x9488;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x6307;&#x9488;&#x3002;&#x6240;&#x4EE5;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x8981;&#x6B63;&#x5E38;&#x5220;&#x9664;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x6837;&#xFF1A;</p><p style="font-size:14px;"></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);"></code></pre><ol class="hljs-ln" style="list-style:none;border-collapse:collapse;"><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">Base1*base2 = base1.release();</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword" style="color:rgb(198,120,221);">delete</span> base2;</div></div></li></ol><span style="font-size:15px;">&#x5F88;&#x9EBB;&#x70E6;&#x5BF9;&#x4E0D;&#x5BF9;&#xFF0C;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x8FD8;&#x6709;&#x7B2C;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x5462;</span><p style="font-size:15px;"></p><p style="font-size:14px;">3&#x3001;base1.reset()&#xFF1A;&#x4ECE;&#x56FE;&#x4E2D;&#x53EF;&#x770B;&#x51FA;&#xFF0C;&#x662F;&#x91CD;&#x7F6E;&#x667A;&#x80FD;&#x6307;&#x9488;&#xFF0C;&#x5373;&#x628A;&#x5185;&#x5B58;&#x5220;&#x9664;&#xFF0C;&#x4E14;&#x667A;&#x80FD;&#x6307;&#x9488;&#x6307;&#x5411;&#x7A7A;&#xFF0C;&#x4F46;&#x7C7B;&#x578B;&#x4E0D;&#x53D8;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5B89;&#x5168;&#x4FBF;&#x6377;&#x5730;&#x5220;&#x9664;&#xFF1A;</p><p style="font-size:14px;"></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);">base1.reset();</code></pre><p style="font-size:15px;"></p><p style="font-size:14px;">&#x7136;&#x800C;&#x7EE7;&#x7EED;&#x770B;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;<br><img src="https://img-blog.csdn.net/20160107104239555?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt><br><span></span>auto_ptr&#x8FD8;&#x91CD;&#x8F7D;&#x4E86;&#x7B49;&#x53F7;&#x64CD;&#x4F5C;&#x7B26;&#xFF0C;&#x7531;&#x56FE;&#x53EF;&#x77E5;&#x610F;&#x601D;&#x662F;&#x628A;&#x8D4B;&#x503C;&#x667A;&#x80FD;&#x6307;&#x9488;&#x7684;&#x5185;&#x5B58;&#x4EA4;&#x7ED9;&#x88AB;&#x8D4B;&#x503C;&#x667A;&#x80FD;&#x6307;&#x9488;&#xFF0C;&#x5373;&#x5982;&#x4E0B;&#x610F;&#x601D;&#xFF1A;</p><p style="font-size:14px;"></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);"></code></pre><ol class="hljs-ln" style="list-style:none;border-collapse:collapse;"><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">auto_ptr</span> &lt;Base1&gt; base2;</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">base2 = base1;<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//&#x5C06;base1&#x7684;&#x63A7;&#x5236;&#x6743;&#x8F6C;&#x4EA4;&#x7ED9;base2&#xFF0C;&#x4E14;base1&#x6E05;&#x7A7A;&#x4E86;</span></div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">base2-&gt;func();</div></div></li></ol><span style="font-size:15px;"><span style="font-weight:700;"><span></span>&#x56E0;&#x6B64;&#x8FD9;&#x6837;&#x5C31;&#x6709;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x63A7;&#x5236;&#x6743;&#x53EF;&#x4EE5;&#x968F;&#x4FBF;&#x8F6C;&#x6362;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5728;&#x7528;&#xFF0C;&#x7528;&#x8D77;&#x6765;&#x4F1A;&#x53D7;&#x5230;&#x8BF8;&#x591A;&#x9650;&#x5236;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x4E86;&#x4E0B;&#x9762;&#x7684;&#x667A;&#x80FD;&#x6307;&#x9488;&#x3002;</span></span><p style="font-size:15px;"></p><p style="font-size:14px;"><span style="font-weight:700;"><span></span>&#x4ECB;&#x7ECD;&#x4E4B;&#x524D;&#x5148;&#x4E0A;&#x4E00;&#x5F20;&#x522B;&#x4EBA;&#x7684;&#x8868;&#x683C;&#xFF0C;&#x6765;&#x6E90;&#xFF1A;<a href="http://my.oschina.net/hevakelcj/blog/465978" rel="nofollow" data-token="abfed9231d28e38ccbf5805e5d3ae571">http://my.oschina.net/hevakelcj/blog/465978</a>&#xFF0C;&#x8FD9;&#x662F;c++11&#x4E2D;&#x7684;&#x667A;&#x80FD;&#x6307;&#x9488;&#x4E0E;boost&#x5E93;&#x4E2D;&#x7684;&#x6BD4;&#x8F83;&#xFF0C;&#x539F;&#x672C;boost&#x5C31;&#x662F;&#x4E3A;&#x5B8C;&#x5584;auto_ptr&#x641E;&#x5F97;&#x8FD9;&#x4E9B;&#xFF0C;&#x73B0;&#x5728;c++11&#x6709;&#x4E86;&#xFF0C;&#x4E5F;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x7528;&#x54AF;&#x3002;</span></p><p style="font-size:14px;"><span style="font-weight:700;"><img src="https://img-blog.csdn.net/20160107100157019?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></span></p></div><div class="article_content" style="font-size:14px;background-color:rgb(255,255,255);color:rgb(85,85,85);font-family:&apos;microsoft yahei&apos;;"><p style="font-size:15px;line-height:35px;"></p><pre style="font-family:&apos;microsoft yahei&apos;;font-size:15px;line-height:35px;"></pre><p style="font-size:15px;line-height:35px;"></p><h2 style="line-height:26px;font-family:Arial;"><a name="t1"></a><a style="color:rgb(12,137,207);font-size:15px;"></a><a style="color:rgb(12,137,207);font-size:15px;"></a><a style="color:rgb(12,137,207);font-size:15px;"></a><a style="color:rgb(202,0,0);font-size:15px;"></a><span style="font-family:&apos;Microsoft YaHei&apos;;">2.unique_ptr</span></h2><p style="font-size:14px;font-family:Arial;"><span style="font-family:&apos;Microsoft YaHei&apos;;"></span></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;">&#xA0;C++11&#x5F15;&#x5165;&#x4E86;&#x8BB8;&#x591A;&#x4FBF;&#x6377;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5176;&#x4E2D;&#x4E5F;&#x5305;&#x62EC;&#x8FD9;&#x4E2A;&#xFF0C;&#x5728;&#x7528;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x4E0B;&#x5E95;&#x5C42;&#xFF1A;</span></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><img src="https://img-blog.csdn.net/20160107105822579" alt></span></p><p><span style="font-size:15px;line-height:35px;"><span></span>&#x53EF;&#x4EE5;&#x6E05;&#x695A;&#x7684;&#x770B;&#x5230;&#xFF0C;unique_ptr&#x4E2D;&#x7684;&#x62F7;&#x8D1D;&#x6784;&#x9020;&#x548C;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x7B26;delete&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x5C31;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x4ED6;&#x548C;auto_ptr&#x6709;&#x533A;&#x522B;&#xFF0C;&#x63A7;&#x5236;&#x6743;&#x552F;&#x4E00;&#xFF0C;&#x4E0D;&#x80FD;&#x968F;&#x610F;&#x8F6C;&#x6362;&#x3002;&#x7528;&#x6CD5;&#x90FD;&#x5DEE;&#x4E0D;&#x591A;&#xFF1A;</span></p><p><span style="font-size:15px;line-height:35px;"></span></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);"></code></pre><ol class="hljs-ln" style="list-style:none;border-collapse:collapse;"><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">unique_ptr</span>&lt;Base1&gt; base1(<span class="hljs-keyword" style="color:rgb(198,120,221);">new</span> Base1);</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">unique_ptr</span>&lt;Base1&gt;	base2;<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//&#x4F46;&#x662F;&#x4E0D;&#x80FD;&#x7528;&#x62F7;&#x8D1D;&#x6784;&#x9020;&#x548C;&#x7B49;&#x53F7;&#x8D4B;&#x503C;&#x628A;base1&#x8D4B;&#x503C;&#x7ED9;base2&#x4E86;</span></div></div></li></ol><span style="font-weight:700;"><span></span>&#x4F46;&#x662F;&#x5982;&#x679C;&#x60F3;&#x5207;&#x6362;&#x63A7;&#x5236;&#x6743;&#x7684;&#x8BDD;&#x4E5F;&#x4E0D;&#x662F;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD8;&#x6709;&#x4E2A;&#x8FD9;&#x6837;&#x7684;&#x51FD;&#x6570;</span>&#xFF1A;<p></p><p><span style="font-size:15px;line-height:35px;"><img src="https://img-blog.csdn.net/20160107111339697" alt><img src="https://img-blog.csdn.net/20160107153038357" alt><br><span></span>&#x8981;&#x7406;&#x89E3;&#x8FD9;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x7406;&#x89E3;c++11&#x5F15;&#x5165;&#x7684;move&#x548C;forward&#xFF1B;&#x800C;&#x8981;&#x7406;&#x89E3;<span style="color:rgb(85,85,85);line-height:35px;">move&#x548C;forward&#x5F97;&#x5148;&#x7406;&#x89E3;&#x5DE6;&#x503C;&#x548C;&#x53F3;&#x503C;&#x6982;&#x5FF5;&#x3002;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x8BB2;&#x5168;&#x4E00;&#x70B9;&#x5427;&#xFF08;&#x5DF2;&#x7ECF;&#x4E86;&#x89E3;&#x7684;&#x5C31;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x53EF;&#x4EE5;&#xFF09;&#xFF1A;</span></span></p><h1><a name="t2"></a><span style="line-height:35px;"><span><span style="font-size:18px;">&#x8865;&#x5145;&#x77E5;&#x8BC6;&#x70B9;&#xFF08;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x770B;&#x6211;&#x4E0B;&#x4E00;&#x7BC7;&#x66F4;&#x65B9;&#x4FBF;&#x7406;&#x89E3;&#xFF1A;<a href="http://blog.csdn.net/zy19940906/article/details/50481969" rel="nofollow" data-token="a2a62cfb301cdd8cb825bbce333aee22">&#x70B9;&#x51FB;&#x6253;&#x5F00;&#x94FE;&#x63A5;</a>&#xFF09;&#xFF1A;</span></span></span></h1><p><span style="font-size:15px;line-height:35px;"><span style="color:rgb(85,85,85);line-height:35px;"><span style="font-weight:700;">1&#x3001;&#x5DE6;&#x503C;&#x4E0E;&#x53F3;&#x503C;&#xFF1A;</span></span></span></p><p><span style="font-size:15px;line-height:35px;"><span style="color:rgb(85,85,85);line-height:35px;"><span style="font-weight:700;">&#xA0; &#xA0; &#xA0; &#xA0;&#x5DE6;&#x503C;&#x6307;&#x7684;&#x662F;&#x65E2;&#x80FD;&#x591F;&#x51FA;&#x73B0;&#x5728;&#x7B49;&#x53F7;&#x5DE6;&#x8FB9;&#x4E5F;&#x80FD;&#x51FA;&#x73B0;&#x5728;&#x7B49;&#x53F7;&#x53F3;&#x8FB9;&#x7684;&#x53D8;&#x91CF;(&#x6216;&#x8868;&#x8FBE;&#x5F0F;)&#xFF0C;&#x53F3;&#x503C;&#x6307;&#x7684;&#x5219;&#x662F;&#x53EA;&#x80FD;&#x51FA;&#x73B0;&#x5728;&#x7B49;&#x53F7;&#x53F3;&#x8FB9;&#x7684;&#x53D8;&#x91CF;(&#x6216;&#x8868;&#x8FBE;&#x5F0F;)</span>&#x3002;</span></span><span style="font-size:15px;line-height:35px;">&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5DE6;&#x503C;&#x662F;&#x6307;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x675F;&#x540E;&#x4F9D;&#x7136;&#x5B58;&#x5728;&#x7684;&#x6301;&#x4E45;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x53F3;&#x503C;&#x662F;&#x6307;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x675F;&#x65F6;&#x5C31;&#x4E0D;&#x518D;&#x5B58;&#x5728;&#x7684;&#x4E34;&#x65F6;&#x5BF9;&#x8C61;&#x3002;<span style="color:rgb(85,85,85);line-height:35px;"><span style="color:rgb(75,75,75);font-family:&apos;Microsoft YaHei&apos;;font-size:13px;line-height:19.5px;">T&amp; &#x6307;&#x5411;&#x7684;&#x662F; lvalue&#xFF0C;&#x800C; const T&amp; &#x6307;&#x5411;&#x7684;&#xFF0C;&#x5374;&#x53EF;&#x80FD;&#x662F; lvalue &#x6216; rvalue&#xFF0C;</span></span></span><span style="font-size:15px;line-height:35px;">&#x5DE6;&#x503C;&#x5F15;&#x7528;&amp;&#x4E0E;&#x53F3;&#x503C;&#x5F15;&#x7528;&amp;&amp;&#xFF08;&#x53F3;&#x503C;&#x5F15;&#x7528;&#x662F;c++11&#x52A0;&#x4E0A;&#x7684;&#xFF09;&#x3002;</span></p><p><span style="font-size:15px;line-height:35px;"><span style="font-weight:700;">2&#x3001;move&#x548C;forward&#xFF1A;</span></span></p><p><span style="font-size:15px;line-height:35px;"><span style="font-weight:700;">&#xA0; &#xA0; &#xA0; &#xA0;&#x9700;&#x8981;&#x660E;&#x786E;&#x7684;&#x662F;&#xFF0C;move&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x7528;&#x4E8E;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8D4B;&#x503C;&#x51FD;&#x6570;&#xFF0C;&#x4F46;&#x90FD;&#x9700;&#x8981;&#x624B;&#x52A8;&#x663E;&#x793A;&#x6DFB;&#x52A0;&#x3002;&#x5176;&#x5B9E;move&#x51FD;&#x6570;&#x7528;&#x76F4;&#x767D;&#x70B9;&#x7684;&#x8BDD;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x7701;&#x53BB;&#x62F7;&#x8D1D;&#x6784;&#x9020;&#x548C;&#x8D4B;&#x503C;&#x65F6;&#x4E2D;&#x95F4;&#x7684;&#x4E34;&#x65F6;&#x5BF9;&#x8C61;&#xFF0C;&#x5C06;&#x8D44;&#x6E90;&#x7684;&#x5185;&#x5B58;&#x4ECE;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x79FB;&#x52A8;&#x5230;&#xFF08;&#x5171;&#x4EAB;&#x4E5F;&#x53EF;&#x4EE5;&#xFF09;&#x53E6;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;&#x5B98;&#x8BDD;&#x662F;&#xFF1A;c++11 &#x4E2D;&#x7684; move() &#x662F;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x8BE5;&#x53C2;&#x6570;&#x5BF9;&#x5E94;&#x7684;&#x53F3;&#x503C;&#x5F15;&#x7528;&#x3002;</span></span></p><p><span style="font-size:15px;line-height:35px;"><span style="font-weight:700;">&#xA0; &#xA0; &#xA0; &#xA0;std::forward&lt;T&gt;(u) &#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;T &#x4E0E; u&#x3002;&#x5F53;T&#x4E3A;&#x5DE6;&#x503C;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x65F6;&#xFF0C;u&#x5C06;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;T&#x7C7B;&#x578B;&#x7684;&#x5DE6;&#x503C;&#xFF0C;&#x5426;&#x5219;u&#x5C06;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;T&#x7C7B;&#x578B;&#x53F3;&#x503C;&#x3002;&#x5982;&#x6B64;&#x5B9A;&#x4E49;std::forward&#x662F;&#x4E3A;&#x4E86;&#x5728;&#x4F7F;&#x7528;&#x53F3;&#x503C;&#x5F15;&#x7528;&#x53C2;&#x6570;&#x7684;&#x51FD;&#x6570;&#x6A21;&#x677F;&#x4E2D;&#x89E3;&#x51B3;&#x53C2;&#x6570;&#x7684;&#x5B8C;&#x7F8E;&#x8F6C;&#x53D1;&#x95EE;&#x9898;&#x3002;</span></span></p><p><span style="font-size:15px;line-height:35px;"><span style="font-weight:700;">&#x5176;&#x5B9E;&#x8FD9;&#x91CC;&#x8BF4;&#x7684;&#x4E0D;&#x591F;&#x6E05;&#x6670;&#xFF0C;&#x4E0B;&#x6B21;&#x7FFB;&#x8BD1;&#x4E00;&#x7BC7;&#x56FD;&#x5916;&#x7684;&#x89E3;&#x91CA;&#xFF0C;&#x9605;&#x8BFB;&#x4E0B;&#x6765;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7406;&#x89E3;move&#x8FD9;&#x4E2A;&#x6982;&#x5FF5;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x5148;&#x4E0D;&#x6DF1;&#x5165;&#x3002;</span></span></p><p><span style="font-size:15px;line-height:35px;"><span style="font-weight:700;"><span></span>&#x56DE;&#x5230;&#x8FD9;&#x5F20;&#x56FE;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x4F53;&#x4E5F;&#x5C31;&#x5F88;&#x660E;&#x6717;&#x4E86;&#x2014;&#x2014;&#x91CD;&#x8F7D;move&#x7248;&#x672C;&#x7684;&#x62F7;&#x8D1D;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4EE5;&#x53CA;&#x91CD;&#x8F7D;move&#x7248;&#x672C;&#x7684;&#x7B49;&#x53F7;&#x8D4B;&#x503C;&#x51FD;&#x6570;&#x3002;</span></span></p><p><span style="font-size:15px;line-height:35px;"><span style="font-weight:700;">&#x610F;&#x601D;&#x5C31;&#x662F;&#xFF1A;&#x628A;&#x53F3;&#x503C;&#x7684;&#x5BF9;&#x8C61;&#xFF08;right&#xFF09;&#x79FB;&#x52A8;&#x7ED9;&#x5DE6;&#x503C;&#xFF08;_myt&amp;&#xFF09;&#xFF0C;&#x5E76;&#x4E14;&#x53F3;&#x503C;&#x6E05;&#x7A7A;&#x3002;</span></span></p><p><span style="font-size:15px;line-height:35px;">&#x90A3;&#x4E48;&#x7528;&#x6CD5;&#x6765;&#x4E86;&#xFF1A;</span></p><p><span style="font-size:15px;line-height:35px;"></span></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);"></code></pre><ol class="hljs-ln" style="list-style:none;border-collapse:collapse;"><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">unique_ptr</span>&lt;Base1&gt;	base1(<span class="hljs-keyword" style="color:rgb(198,120,221);">new</span> Base1);</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">unique_ptr</span>&lt;Base1&gt;	base2=move(base1);<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//base1&#x53D8;&#x6210;empty</span></div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">unique_ptr</span>&lt;Base1&gt;	base3;</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">base3 = move(base2);<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//base2&#x53D8;&#x6210;empty</span></div></div></li></ol><span></span>&#x5176;&#x5B83;&#x7684;&#x6210;&#x5458;&#x51FD;&#x6570;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x8D58;&#x8FF0;&#xFF0C;&#x548C;auto_ptr&#x5927;&#x81F4;&#x4E0A;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;&#x603B;&#x7ED3;&#xFF0C;&#x67D0;&#x79CD;&#x7A0B;&#x5EA6;&#x6765;&#x8BF4;&#x6BD4;auto_ptr&#x66F4;&#x4E3A;&#x5B89;&#x5168;&#xFF0C;&#x9002;&#x7528;&#x90E8;&#x5206;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x3002;<p></p></div><div class="article_content" style="font-size:14px;background-color:rgb(255,255,255);color:rgb(85,85,85);font-family:&apos;microsoft yahei&apos;;"><h2 style="font-size:15px;line-height:35px;"><a name="t3"></a><a style="color:rgb(12,137,207);"></a><a style="color:rgb(12,137,207);"></a><a style="color:rgb(12,137,207);font-family:Arial;line-height:26px;"></a><a style="color:rgb(202,0,0);font-family:Arial;line-height:26px;"></a><span style="font-size:24px;"><span style="font-family:&apos;Microsoft YaHei&apos;;line-height:26px;">3.</span>shared_ptr</span></h2><p style="font-size:14px;font-family:Arial;"></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><span></span>&#x5982;&#x679C;&#x5B8C;&#x5168;&#x7406;&#x89E3;&#x4E86;&#x4E0A;&#x9762;&#x4E24;&#x4E2A;ptr&#x7684;&#x5E95;&#x5C42;&#xFF0C;&#x90A3;&#x4E48;shared_ptr&#x7684;&#x4E5F;&#x5C31;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x591A;&#x4E86;&#x3002;&#x4F46;&#x662F;&#x548C;&#x524D;&#x4E24;&#x8005;&#x6709;&#x5F88;&#x5927;&#x533A;&#x522B;&#x2014;&#x2014;</span></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;">&#x524D;&#x4E24;&#x8005;&#x63A7;&#x5236;&#x6743;&#x552F;&#x4E00;&#xFF0C;&#x5207;&#x6362;&#x7684;&#x65F6;&#x5019;&#x628A;&#x524D;&#x9762;&#x7684;&#x6E05;&#x9664;&#x3002;&#x800C;shared_ptr&#x4E0D;&#x4F1A;&#xFF0C;&#x7167;&#x4F8B;&#x770B;&#x4E0B;&#x5E95;&#x5C42;&#xFF1A;</span></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><img src="https://img-blog.csdn.net/20160107161334899" alt><img src="https://img-blog.csdn.net/20160107161344081" alt><br></span></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><span></span>&#x5F88;&#x663E;&#x7136;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8D4B;&#x503C;&#x548C;&#x8C03;&#x7528;&#x62F7;&#x8D1D;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x4E14;&#x4E0D;&#x4F1A;&#x6E05;&#x7A7A;&#x539F;&#x672C;&#x7684;&#x667A;&#x80FD;&#x6307;&#x9488;&#x3002;&#x7528;&#x6CD5;&#x5C31;&#x5F88;&#x7B80;&#x5355;&#x4E86;&#xFF1A;</span></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;"></span></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);"></code></pre><ol class="hljs-ln" style="list-style:none;border-collapse:collapse;"><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">shared_ptr</span>&lt;Base1&gt;	base1(<span class="hljs-keyword" style="color:rgb(198,120,221);">new</span> Base1);</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">shared_ptr</span>&lt;Base1&gt;	base2=base1;</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">shared_ptr</span>&lt;Base1&gt;	base3;</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">base3 = base2;<span class="hljs-comment" style="color:rgb(92,99,112);font-style:italic;">//&#x4E09;&#x4E2A;&#x5171;&#x4EAB;&#x4E00;&#x4E2A;</span></div></div></li></ol><p></p><p style="font-size:14px;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><span></span>&#x6709;&#x4E2A;&#x5730;&#x65B9;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x5F53;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x667A;&#x80FD;&#x6307;&#x9488;&#x65F6;&#xFF0C;&#x5E76;&#x4E0D;&#x5F71;&#x54CD;&#x5176;&#x5B83;&#x4E24;&#x4E2A;&#x667A;&#x80FD;&#x6307;&#x9488;&#x7684;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x3002;&#x56E0;&#x4E3A;&#x8BE5;&#x7247;&#x5185;&#x5B58;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#xFF0C;&#x6BCF;shared_ptr&#x4E00;&#x6B21;&#xFF0C;&#x5F15;&#x7528;&#x8BA1;&#x6570;+1&#xFF1B;&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x6790;&#x6784;&#x51FD;&#x6570;&#xFF0C;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x51CF;&#x4E00;&#x3002;&#x76F4;&#x5230;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x667A;&#x80FD;&#x6307;&#x9488;&#x5220;&#x9664;&#xFF0C;&#x624D;&#x4F1A;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x3002;</span></p><h2 style="line-height:26px;"><a name="t4"></a><span style="font-family:&apos;Microsoft YaHei&apos;;">&#x6CE8;&#x610F;&#xFF1A;</span></h2><p><span></span><span style="font-size:14px;"><span style="font-weight:700;">1&#x3001;&#x5728;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#xFF1A;</span></span></p><p><img src="https://img-blog.csdn.net/20160107162217041" alt><img src="https://img-blog.csdn.net/20160107162232573" alt><br></p><p><span></span><span style="font-size:14px;"><span style="font-weight:700;">&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x548C;unique_ptr&#x4E00;&#x6837;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;move&#x6765;&#x5207;&#x6362;&#x63A7;&#x5236;&#x6743;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x662F;&#x5207;&#x6362;&#xFF0C;&#x4E0D;&#x662F;&#x5171;&#x4EAB;&#x4E86;&#x3002;</span></span></p><p><span style="font-size:14px;"><span style="font-weight:700;"><span></span>2&#x3001;&#x63A5;&#x4E0B;&#x6765;&#x7EE7;&#x7EED;&#x7FFB;&#x770B;&#xFF0C;&#x8FD8;&#x6709;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#xFF1A;</span></span></p><p><span style="font-size:14px;"><span style="font-weight:700;"><img src="https://img-blog.csdn.net/20160107162607502" alt><br></span></span></p><p><span style="font-size:14px;"><span style="font-weight:700;"><span></span>&#xFF08;&#x5176;&#x5B9E;auto_ptr&#x4E5F;&#x6709;&#xFF0C;&#x53EA;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x6CA1;&#x5FC5;&#x8981;&#x622A;&#x56FE;&#x4E86;&#xFF09;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;auto_ptr&#x548C;unique_ptr&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;move&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x6210;shared_ptr&#x7C7B;&#x578B;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x4E00;&#x6837;&#x662F;&#x5207;&#x6362;&#x63A7;&#x5236;&#x6743;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5373;&#x65E7;&#x7684;&#x7F6E;&#x7A7A;&#x3002;</span></span></p><p><span style="font-size:14px;"><span style="font-weight:700;">&#x7528;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</span></span></p><p></p><pre style="font-size:14px;line-height:22px;"><code class="language-cpp hljs" style="color:rgb(171,178,191);background-color:rgb(40,44,52);"></code></pre><ol class="hljs-ln" style="list-style:none;border-collapse:collapse;"><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">auto_ptr</span>&lt;Base1&gt;	base1(<span class="hljs-keyword" style="color:rgb(198,120,221);">new</span> Base1);</div></div></li><li style="list-style-type:none;"><div class="hljs-ln-numbers" style="width:24px;border-right:1px solid rgb(197,197,197);"><div class="hljs-ln-line hljs-ln-n" style="text-align:right;"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-built_in" style="color:rgb(230,192,123);">shared_ptr</span>&lt;Base1&gt;	base2=move(base1);</div></div></li></ol></div><div class="article_content" style="font-family:&apos;-apple-system&apos;, &apos;SF UI Text&apos;, Arial, &apos;PingFang SC&apos;, &apos;Hiragino Sans GB&apos;, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);font-size:15px;color:rgb(85,85,85);line-height:35px;"><br><br><h2 style="font-size:15px;color:rgb(85,85,85);line-height:35px;"><a name="t5"></a><a style="color:rgb(12,137,207);font-family:&apos;microsoft yahei&apos;;"></a><a style="color:rgb(12,137,207);font-family:&apos;microsoft yahei&apos;;"></a><a style="color:rgb(12,137,207);font-family:Arial;line-height:26px;"></a><a style="color:rgb(202,0,0);font-family:Arial;line-height:26px;"></a><span style="font-family:&apos;microsoft yahei&apos;;font-size:24px;"><span style="font-family:&apos;Microsoft YaHei&apos;;line-height:26px;">4.weak_ptr</span></span><a style="color:rgb(12,137,207);font-family:&apos;microsoft yahei&apos;;"><span style="font-size:24px;color:rgb(85,85,85);">red_ptr</span></a><span style="font-size:24px;"><span style="line-height:26px;"></span></span></h2><p style="font-size:14px;color:rgb(85,85,85);font-family:Arial;"></p><p style="font-size:14px;color:rgb(85,85,85);font-family:&apos;microsoft yahei&apos;;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><span></span><span>weak_ptr&#x66F4;&#x50CF;&#x662F;shared_ptr&#x7684;&#x52A9;&#x624B;&#xFF1A;</span></span></p><p style="font-size:14px;color:rgb(85,85,85);font-family:&apos;microsoft yahei&apos;;"><span style="font-family:&apos;Microsoft YaHei&apos;;"><span></span>1&#x3001;&#x4ED6;&#x4E0D;&#x50CF;&#x5176;&#x4F59;&#x4E09;&#x79CD;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x51FD;&#x6570;&#x76F4;&#x63A5;&#x5206;&#x914D;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#xFF1B;&#x4ED6;&#x5FC5;&#x987B;&#x901A;&#x8FC7;shared_ptr&#x6765;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x3002;</span></p><p style="font-size:14px;color:rgb(85,85,85);"><span></span><span>2&#x3001;&#x6CA1;&#x6709;&#x91CD;&#x8F7D;opreator*&#x548C;-&gt;&#x64CD;&#x4F5C;&#x7B26;&#xFF0C;&#x4E5F;&#x5C31;&#x610F;&#x5473;&#x7740;&#x5373;&#x4F7F;&#x5206;&#x914D;&#x5230;&#x5BF9;&#x8C61;&#xFF0C;&#x4ED6;&#x4E5F;&#x6CA1;&#x6CD5;&#x4F7F;&#x7528;&#x8BE5;&#x5BF9;&#x8C61;</span></p><p style="font-size:14px;color:rgb(85,85,85);"><span><span></span>3&#x3001;&#x4E0D;&#x4E3B;&#x52A8;&#x53C2;&#x4E0E;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#xFF0C;&#x5373;&#xFF0C;share_ptr&#x91CA;&#x653E;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;weak_ptr&#x6240;&#x5B58;&#x7684;&#x5BF9;&#x8C61;&#x4E5F;&#x91CA;&#x653E;&#x4E86;&#x3002;</span></p><p style="font-size:14px;color:rgb(85,85,85);"><span><span></span>4&#x3001;&#x4F7F;&#x7528;&#x6210;&#x5458;&#x51FD;&#x6570;use_count()&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#xFF0C;expired()<span style="font-family:&apos;microsoft yahei&apos;;">&#x5224;&#x65AD;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#x3002;</span></span></p><p style="font-size:14px;color:rgb(85,85,85);"><span><span style="font-family:&apos;microsoft yahei&apos;;"><span></span>5&#x3001;lock()&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;shared_ptr&#x667A;&#x80FD;&#x6307;&#x9488;&#xFF1A;</span></span></p><p style="font-size:14px;color:rgb(85,85,85);"><span><span style="font-family:&apos;microsoft yahei&apos;;"><img src="https://img-blog.csdn.net/20160107165158719" alt><br></span></span></p><p style="color:rgb(85,85,85);font-family:&apos;microsoft yahei&apos;;"><span></span><span style="font-size:14px;">&#x4E5F;&#x5C31;&#x662F;&#x8BA9;weak_ptr&#x89C2;&#x6D4B;shared_ptr&#x667A;&#x80FD;&#x6307;&#x9488;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x9700;&#x8981;&#x65F6;&#x5019;&#x901A;&#x8FC7;lock&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;shared_ptr&#x3002;</span></p><p style="color:rgb(85,85,85);font-family:&apos;microsoft yahei&apos;;"><span style="font-size:14px;"><span></span>6&#x3001;&#x6B64;&#x5916;&#xFF0C;&#x767E;&#x79D1;&#x4E0A;&#x8BF4;&#xFF1A;&#x52A9;&#x624B;&#x7C7B;enable_shared_from_this&#x7684;Shared_from_this&#x4F1A;&#x8FD4;&#x56DE;this&#x7684;shared_ptr&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x9700;&#x8BA9;&#x8981;&#x88AB;shared_ptr&#x7BA1;&#x7406;&#x7684;&#x7C7B;&#x7EE7;&#x627F;&#x5B83;&#x5373;&#x53EF;&#x3002;&#x6211;&#x5012;&#x662F;&#x6CA1;&#x8BD5;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x8BD5;&#x8BD5;&#xFF0C;&#x5927;&#x81F4;&#x610F;&#x601D;&#x4E5F;&#x5C31;&#x662F;&#x8FD9;&#x822C;&#x3002;</span></p></div><br>                                    