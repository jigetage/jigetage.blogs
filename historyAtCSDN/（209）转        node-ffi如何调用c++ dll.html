
                                            <p style="background-color:rgb(255,255,255);">&#x539F;&#x6587;&#x5730;&#x5740;&#xFF1A;</p><p style="background-color:rgb(255,255,255);"><a href="https://blog.csdn.net/cut001/article/details/69397022" rel="nofollow" data-token="9527bddd64abb7cc16eb88e4c9b6899a">&#x70B9;&#x51FB;&#x6253;&#x5F00;&#x94FE;&#x63A5;</a><br></p><p style="background-color:rgb(255,255,255);"><br></p><p style="background-color:rgb(255,255,255);"><br></p><p style="background-color:rgb(255,255,255);">FUNCTION ulong DesEnCodeHex(string str, string key, ref string outstr) library &quot;zm_2007.dll&quot;&#xA0;<br></p><p style="background-color:rgb(255,255,255);">int DesEnCodeHex(const char* str,const&#xA0; char* key, char* outstr) ; //c &#x63A5;&#x53E3;&#x63CF;&#x8FF0;&#xA0; &#x5B57;&#x7B26;&#x6307;&#x9488;&#x4F20;&#x51FA;<br></p><p style="background-color:rgb(255,255,255);">function long LIV_open(long vender,long index,ref long handle) library &quot;living1.dll&quot;</p><p style="background-color:rgb(255,255,255);">int LIV_open(int vender,int index, int* handle);////c &#x63A5;&#x53E3;&#x63CF;&#x8FF0; &#xA0;&#xA0; &#x6574;&#x5F62;&#x6307;&#x9488;&#x4F20;&#x51FA;&#x3002;<br></p><p style="background-color:rgb(255,255,255);">function long LIV_get_hardware_info(long handle, ref LIV_hardware_info info) library &quot;living1.dll&quot;</p><p style="background-color:rgb(255,255,255);">int LIV_get_hardware_info(int handle,LIV_hardware_info info); //&#x7ED3;&#x6784;&#x4F53;&#x6307;&#x9488;&#x4F20;&#x51FA;<br></p><p style="background-color:rgb(255,255,255);"><br></p><p style="background-color:rgb(255,255,255);">node.js&#x8C03;&#x7528;&#x52A8;&#x6001;&#x5E93;&#xFF0C;&#x91C7;&#x7528;node-ffi &#x6A21;&#x5757;&#x3002;</p><p style="background-color:rgb(255,255,255);"></p><div style="padding:0px;margin:0px;font-size:14px;color:rgb(0,0,0);background-color:rgb(255,255,255);font-family:Consolas, &apos;Courier New&apos;, monospace;line-height:19px;"><div style="padding:0px;margin:0px;"><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">FFI</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(121,94,38);">require</span><span>(</span><span style="color:rgb(163,21,21);">&apos;ffi&apos;</span><span>);</span></div></div><div style="padding:0px;margin:0px;font-size:14px;color:rgb(0,0,0);background-color:rgb(255,255,255);font-family:Consolas, &apos;Courier New&apos;, monospace;line-height:19px;"><div style="padding:0px;margin:0px;"><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">ref</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(121,94,38);">require</span><span>(</span><span style="color:rgb(163,21,21);">&apos;ref&apos;</span><span>)<span style="color:rgb(0,0,255);">&#xFF1B;</span></span></div><div style="padding:0px;margin:0px;"><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">Struct</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(121,94,38);">require</span><span>(</span><span style="color:rgb(163,21,21);">&apos;ref-struct&apos;</span><span>);</span></div><div style="padding:0px;margin:0px;"><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">refArray</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(121,94,38);">require</span><span>(</span><span style="color:rgb(163,21,21);">&apos;ref-array&apos;</span><span style="color:#000000;">);<br>1&#x3001;&#x6839;&#x636E;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x58F0;&#x660E;&#x51FD;&#x6570;&#x3002;<br>&#xA0;&#xA0; char* =&gt; string&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; //<span><span><span>&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#xA0; char *</span></span></span><br>&#xA0;&#xA0; int* =&gt;&#xA0;<span style="color:#000000;"><span style="color:rgb(0,16,128);">ref</span><span>.</span><span style="color:rgb(121,94,38);">refType</span><span>(</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>) //&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528; int *<br>&#xA0;&#xA0; struct *=&gt;<span><span><span style="color:rgb(0,16,128);">ref</span><span>.</span><span style="color:rgb(121,94,38);">refType</span><span>(</span><span style="color:rgb(0,16,128);">liv_hardware_info</span><span style="color:#000000;">)<br>&#xA0;&#xA0; struct[] *=&gt;&#xA0;<span><span><span><span><span><span style="color:rgb(0,16,128);">ref</span><span>.</span><span style="color:rgb(121,94,38);">refType</span><span>(</span><span style="color:rgb(0,16,128);">liv_hardware_info</span><span>,3) //&#x7ED3;&#x6784;&#x4F53;&#x6570;&#x7EC4;<br>&#xA0;&#xA0; VOID * =&gt; ref.refType(&apos;pointer&apos;)</span></span></span></span></span></span></span></span></span></span></span></span><pre style="padding-right:0px;padding-left:0px;font-size:14px;line-height:22px;"><span class="nx"></span><span class="p">
</span></pre>&#xA0;&#xA0; &#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x7684;&#x53C2;&#x6570;&#xFF1A;<br>&#xA0; &#xA0; char* [] =&gt;&#xA0;<span><span style="color:rgb(121,94,38);">refArray</span><span>(</span><span style="color:rgb(163,21,21);">&apos;byte&apos;</span><span>,&#xA0;</span><span style="color:rgb(9,136,90);">8</span><span>)<br></span></span><h3 style="padding:0px;"><a></a>&#x57FA;&#x672C;&#x7C7B;&#x578B;</h3><div class="p_part" style="padding:0px;margin:0px;"><p>&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x5728;&#x4E86;<code style="font-size:14px;line-height:22px;">ref.types</code>&#x91CC;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7C7B;&#x578B;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x8005;&apos;ref.types&apos;&#x4E2D;&#x7684;&#x7C7B;&#x578B;&#x5BF9;&#x8C61;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#xFF0C;&#x7B80;&#x5355;&#x5F53;&#x4F5C;<code style="font-size:14px;line-height:22px;">int</code>&#x6216;&#x8005;<code style="font-size:14px;line-height:22px;">uint</code>&#x5904;&#x7406;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p></div><h3 style="padding:0px;"><a></a>&#x6307;&#x9488;</h3><div class="p_part" style="padding:0px;margin:0px;"><p>&#x5BF9;&#x4E8E;&#x6307;&#x9488;&#x7C7B;&#x578B;&#xFF0C;&#x7B80;&#x5355;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x53C2;&#x6570;&#x5217;&#x8868;&#x91CC;&#x5199;<code style="font-size:14px;line-height:22px;">int *</code>&#xFF0C;<code style="font-size:14px;line-height:22px;">pointer</code>&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x751F;&#x6210;&#x7C7B;&#x578B;&#x7684;&#x6307;&#x9488;&#x53EF;&#x4EE5;&#x7528;<code style="font-size:14px;line-height:22px;">ref.refType(type)</code>&#x3002;&#x5728;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x6267;&#x884C;<code style="font-size:14px;line-height:22px;">var vRef = ref.alloc(type)</code>&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#xFF0C;&#x5C06;&#x5BF9;&#x8C61;&#x4F20;&#x5165;&#x51FD;&#x6570;&#x5373;&#x53EF;&#x3002;&#x9700;&#x8981;&#x83B7;&#x53D6;<code style="font-size:14px;line-height:22px;">vRef</code>&#x6307;&#x5411;&#x7684;&#x503C;<code style="font-size:14px;line-height:22px;">v</code>&#x53EF;&#x4EE5;&#x7528;<code style="font-size:14px;line-height:22px;">var v = ref.deref(vRef)</code>&#x3002;&#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x7684;<code style="font-size:14px;line-height:22px;">buffer</code>&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4F7F;&#x7528;<code style="font-size:14px;line-height:22px;">ref.readCString(buffer)</code>&#x6765;&#x8BFB;&#x53D6;&#xFF08;&#x5B83;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x672B;&#x5C3E;&#x7684;<code style="font-size:14px;line-height:22px;">&apos;\0&apos;</code>&#xFF09;&#x3002;</p></div><br><br><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">intPtr</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,16,128);">ref</span><span>.</span><span style="color:rgb(121,94,38);">refType</span><span>(</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>);</span></div></div><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">liv_hardware_info</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(121,94,38);">Struct</span><span>({</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;</span><span style="color:rgb(163,21,21);">&apos;developernumber&apos;</span><span style="color:rgb(0,16,128);">:</span><span>&#xA0;</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>,</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;</span><span style="color:rgb(163,21,21);">&apos;serialnumber&apos;</span><span style="color:rgb(0,16,128);">:</span><span>&#xA0;</span><span style="color:rgb(121,94,38);">refArray</span><span>(</span><span style="color:rgb(163,21,21);">&apos;byte&apos;</span><span>,&#xA0;</span><span style="color:rgb(9,136,90);">8</span><span>),</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;</span><span style="color:rgb(163,21,21);">&apos;manufacturedate&apos;</span><span style="color:rgb(0,16,128);">:</span><span>&#xA0;</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span></div><div style="padding:0px;margin:0px;"><span>});<br></span><br></div></div><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span style="color:rgb(0,0,255);">let</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">zm2007</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,0,255);">new</span><span>&#xA0;</span><span style="color:rgb(38,127,153);">FFI</span><span>.</span><span style="color:rgb(38,127,153);">Library</span><span>(</span><span style="color:rgb(163,21,21);">&quot;./dll/zm_2007.dll&quot;</span><span>,&#xA0;{</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;</span><span style="color:rgb(163,21,21);">&apos;DesEnCodeHex&apos;</span><span style="color:rgb(0,16,128);">:</span><span>&#xA0;[</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>,&#xA0;[</span><span style="color:rgb(163,21,21);">&apos;string&apos;</span><span>,&#xA0;</span><span style="color:rgb(163,21,21);">&apos;<span>string</span>&apos;</span><span>,&#xA0;</span><span style="color:rgb(163,21,21);">&apos;<span>string</span>&apos;</span><span>]],</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;</span><span style="color:rgb(163,21,21);">&apos;DesDeCodeHex&apos;</span><span style="color:rgb(0,16,128);">:</span><span>&#xA0;[</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>,&#xA0;[</span><span style="color:rgb(163,21,21);">&apos;string&apos;</span><span>,&#xA0;</span><span style="color:rgb(163,21,21);">&apos;<span>string</span><span></span>&apos;</span><span>,&#xA0;</span><span style="color:rgb(163,21,21);">&apos;<span><span>string</span></span>&apos;</span><span>]],<br></span><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;</span><span style="color:rgb(163,21,21);">&apos;LIV_open&apos;</span><span style="color:rgb(0,16,128);">:</span><span>&#xA0;[</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>,&#xA0;[</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>,&#xA0;</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>,&#xA0;</span><span style="color:rgb(0,16,128);">intPtr</span><span>]],</span></div></div><span></span><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span>&#xA0;</span><span style="color:rgb(163,21,21);">&#xA0;&apos;LIV_get_hardware_info&apos;</span><span style="color:rgb(0,16,128);">:</span><span>&#xA0;[</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>,&#xA0;[</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>,&#xA0;</span><span style="color:rgb(0,16,128);">ref</span><span>.</span><span style="color:rgb(121,94,38);">refType</span><span>(</span><span style="color:rgb(0,16,128);">liv_hardware_info</span><span>)</span><span>]]</span></div></div></div><div style="padding:0px;margin:0px;"><span>});</span></div></div>2&#x3001;&#x8C03;&#x7528;&#x65B9;&#x6CD5;<br>&#xA0;&#xA0;&#xA0;&#xA0;<br><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span style="color:rgb(0,128,0);"></span><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;</span><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">handleRef</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,16,128);">ref</span><span>.</span><span style="color:rgb(121,94,38);">alloc</span><span>(</span><span style="color:rgb(163,21,21);">&apos;int&apos;</span><span>);//&#x9884;&#x5148;&#x5206;&#x914D;int&#xA0; &#x6307;&#x9488;&#x7A7A;&#x95F4;</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color:rgb(0,0,255);">let</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">li_rtn</span><span>&#xA0;=&#xA0;</span><span><span style="color:rgb(0,128,0);"><span style="color:rgb(0,16,128);">zm2007</span></span></span><span>.</span><span style="color:rgb(121,94,38);">LIV_open</span><span>(</span><span style="color:rgb(9,136,90);">0</span><span>,&#xA0;</span><span style="color:rgb(9,136,90);">0</span><span>,&#xA0;</span><span style="color:rgb(0,16,128);">handleRef</span><span>)</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color:rgb(0,16,128);">ll_handle</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,16,128);">handleRef</span><span>.</span><span style="color:rgb(121,94,38);">deref</span><span>();//&#x83B7;&#x53D6;int&#x503C;</span></div></div><br>&#xA0;<div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">lt</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,0,255);">new</span><span>&#xA0;</span><span style="color:rgb(38,127,153);">Buffer</span><span>(</span><span style="color:rgb(9,136,90);">512</span><span>).</span><span style="color:rgb(121,94,38);">fill</span><span>(</span><span style="color:rgb(163,21,21);">&quot;&#xA0;&quot;</span><span>);</span><br></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color:rgb(0,16,128);">zm2007</span><span>.</span><span style="color:rgb(121,94,38);">DesEnCodeHex</span><span>(</span><span style="color:rgb(0,16,128);">st</span><span>,&#xA0;</span><span style="color:rgb(163,21,21);">&apos;770814&apos;</span><span>,&#xA0;</span><span style="color:rgb(0,16,128);">lt</span><span>);</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color:rgb(0,0,255);">let</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">ls_out</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,16,128);">lt</span><span>.</span><span style="color:rgb(121,94,38);">toString</span><span>(</span><span style="color:rgb(163,21,21);">&quot;ascii&quot;</span><span>); //buffer&#x4E2D;&#x5373;&#x4E3A;&#x4F20;&#x51FA;&#x53C2;&#x6570;<br></span></div></div><br></div></div><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;&#xA0;</span><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">liv_info</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,0,255);">new</span><span>&#xA0;</span><span style="color:rgb(38,127,153);">liv_hardware_info</span><span>();//&#x7ED3;&#x6784;&#x4F53;&#x521D;&#x59CB;&#x5316;</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span><span style="color:rgb(0,16,128);">zm2007</span><span></span></span><span>.</span><span style="color:rgb(121,94,38);">LIV_get_hardware_info</span><span>(</span><span style="color:rgb(0,16,128);">ll_handle</span><span>,&#xA0;</span><span style="color:rgb(0,16,128);">liv_info</span><span>.</span><span style="color:rgb(121,94,38);">ref</span><span>());//&#x8C03;&#x7528;</span></div><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color:rgb(0,0,255);">const</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">buf</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(38,127,153);">Buffer</span><span>.</span><span style="color:rgb(121,94,38);">from</span><span>(</span><span style="color:rgb(0,16,128);">liv_info</span><span>.</span><span style="color:rgb(0,16,128);">serialnumber</span><span>); //&#x83B7;&#x53D6;&#x5DF2;&#x751F;&#x6210;&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x5C5E;&#x6027;&#x6570;&#x636E;&#x3002;<br></span></div></div>&#xA0;<br>&#x8865;&#x5145;&#x4E00;&#x70B9;&#xFF1A;&#x5B57;&#x7B26;&#x96C6;&#x5F15;&#x8D77;&#x7684;&#x4E2D;&#x6587;&#x4E71;&#x7801;&#x95EE;&#x9898;&#xA0;<br>&#x9ED8;&#x8BA4;node.js&#x662F;utf8&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x7684;dll&#x5F88;&#x591A;&#x90FD;&#x662F;gbk&#x7F16;&#x7801;&#xFF0C;&#x4ECE;&#x53C2;&#x6570;&#x7684;&#x4F20;&#x5165;&#x9700;&#x8981;&#x8F6C;&#x6210;gbk<br>&#xA0;&#x8F6C;&#x7801;&#x4E00;&#x822C;&#x7528;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#xFF0C;&#x7EAF;js&#x7248;&#x672C;<br><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">iconv</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(121,94,38);">require</span><span>(</span><span style="color:rgb(163,21,21);">&apos;iconv-lite&apos;</span><span>);<br>&#xA0;</span><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span>&#xA0;&#xA0;</span><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">infoRef</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,0,255);">new</span><span>&#xA0;</span><span style="color:rgb(38,127,153);">Buffer</span><span>(</span><span style="color:rgb(9,136,90);">512</span><span>);</span><span style="color:rgb(0,128,0);"><span style="color:rgb(0,0,0);">//&#x8C03;&#x7528;&#x51FD;&#x6570;&#x9884;&#x5148;&#x5206;&#x914D;&#x7A7A;&#x95F4;<br>&#xA0; //&#x5F00;&#x59CB;&#x8C03;&#x7528;&#x3002;<span><span><span style="color:rgb(0,16,128);">infoRef</span><span></span></span>&#x4E2D;&#x662F;dll&#x8FD4;&#x56DE;&#x7684;gbk &#x6570;&#x636E;&#x4E32;&#x3002;<br><br></span></span></span></div></div><div style="padding:0px;margin:0px;line-height:19px;"><br><div style="padding:0px;margin:0px;"><span>&#xA0;var&#xA0;</span><span style="color:rgb(0,16,128);">as_data</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,16,128);">iconv</span><span>.</span><span style="color:rgb(121,94,38);">decode</span><span>(</span><span style="color:rgb(0,16,128);">infoRef</span><span>,&#xA0;</span><span style="color:rgb(163,21,21);">&apos;GBK&apos;</span><span>)</span><span>;//&#x89E3;&#x7801;&#x6210;utf8.<br>&#xA0;<br></span><div style="padding:0px;margin:0px;line-height:19px;"><div style="padding:0px;margin:0px;"><span>&#xA0;</span><span style="color:rgb(0,0,255);">var</span><span>&#xA0;</span><span style="color:rgb(0,16,128);">userbuffer</span><span>&#xA0;=&#xA0;</span><span style="color:rgb(0,16,128);">iconv</span><span>.</span><span style="color:rgb(121,94,38);">encode</span><span>(</span><span style="color:rgb(0,16,128);">as_data</span><span>,&#xA0;</span><span style="color:rgb(163,21,21);">&apos;gbk&apos;</span><span>);//utf8&#x6570;&#x636E;&#x7F16;&#x7801;&#x6210;gbk</span></div></div><br>&#xA0;&#x603B;&#x7ED3;&#xFF1A; &#x4E2D;&#x6587; &#x4F20;&#x5165;&#x53C2;&#x6570;&#x9700;&#x8981;&#x8F6C;&#x7801;&#x6210;gbk &#xFF0C;&#x4F20;&#x51FA;&#x53C2;&#x6570;&#x9700;&#x8981;&#x8F6C;&#x7801;&#x6210;utf8.</div></div></div></div></div></div>                                    