
                                            <p>&#x539F;&#x6587;&#x5730;&#x5740;&#xFF1A;</p><p><a href="https://www.cnblogs.com/Starts_2000/p/electron-ffi.html" rel="nofollow" data-token="c128f2d29c12f92092d2209d8f86c269">&#x70B9;&#x51FB;&#x6253;&#x5F00;&#x94FE;&#x63A5;</a></p><p></p><h2 style="margin-top:20px;margin-bottom:20px;padding:0px;font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">&#x4E00;&#x3001;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x4F7F;&#x7528;DLL</h2><ul style="margin-bottom:1em;margin-left:40px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><li style="margin-top:0px;margin-left:0px;padding:0px;">&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7CFB;&#x7EDF; API &#x64CD;&#x4F5C;&#x6216;&#x6269;&#x5C55;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF1B;</li><li style="margin-top:0px;margin-left:0px;padding:0px;">&#x9700;&#x8981;&#x8C03;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x63A5;&#x53E3;API&#xFF0C;&#x7279;&#x522B;&#x662F;&#x4E0E;&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x63A5;&#x53E3; API &#x57FA;&#x672C;&#x4E0A;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#xA0;C++ &#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#xFF08;DLL&#xFF09;&#x5B9E;&#x73B0;&#x7684;&#xFF1B;</li><li style="margin-top:0px;margin-left:0px;padding:0px;">&#x9700;&#x8981;&#x8C03;&#x7528;C++&#x5B9E;&#x73B0;&#x7684;&#x4E00;&#x4E9B;&#x590D;&#x6742;&#x7B97;&#x6CD5;&#x7B49;&#x3002;</li></ul><h2 style="margin-top:20px;margin-bottom:20px;padding:0px;font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;line-height:1.5;">&#x4E8C;&#x3001;node-ffi &#x662F;&#x4EC0;&#x4E48;</span></h2><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><a href="https://github.com/node-ffi/node-ffi" rel="nofollow" style="margin:0px;padding:0px;color:rgb(0,0,0);text-decoration:underline;" data-token="3b32478f17bfdfb08aa970bb1b0b94a1">node-ffi</a>&#xFF1A;Node.js Foreign Function Interface</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><code style="margin:0px;padding:0px;">node-ffi</code>&#xA0;is a Node.js addon for loading and calling dynamic libraries using pure JavaScript. It can be used to create bindings to native libraries without writing any C++ code. It also simplifies the augmentation of node.js with C code as it takes care of handling the translation of types across JavaScript and C, which can add reams of boilerplate code to your otherwise simple C. See the example/factorial for an example of this use case.</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;">WARNING:</span>&#xA0;<code style="margin:0px;padding:0px;">node-ffi</code>&#xA0;assumes you know what you&apos;re doing. You can pretty easily create situations where you will segfault the interpreter and unless you&apos;ve got C debugger skills, you probably won&apos;t know what&apos;s going on.</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x4E0A;&#x9762;&#x662F; node-ffi &#x7684;&#x4ECB;&#x7ECD;&#xFF0C;&#x82F1;&#x8BED;&#x4E0D;&#x597D;&#xFF0C;&#x5C31;&#x4E0D;&#x7FFB;&#x8BD1;&#x4E86;&#x3002;</p><h2 style="margin-top:20px;margin-bottom:20px;padding:0px;font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">&#x4E09;&#x3001;electron &#x4F7F;&#x7528; node-ffi</h2><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x4F7F;&#x7528;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x5728; package.json&#xA0;&#x7684; dependencies&#xA0;&#x8282;&#x70B9;&#x4E0A;&#x52A0;&#x4E0A;node-ffi &#x4F9D;&#x8D56;&#xFF1A;</p><div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:&apos;Courier New&apos;;font-size:12px;"><pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:&apos;Courier New&apos;;">&quot;dependencies&quot;<span style="margin:0px;padding:0px;line-height:1.5;">: {
        </span>&quot;electron&quot;: &quot;^1.6.11&quot;<span style="margin:0px;padding:0px;line-height:1.5;">,
        </span>&quot;ffi&quot;: &quot;2.2.0&quot;<span style="margin:0px;padding:0px;line-height:1.5;">
    }</span></pre></div><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x7136;&#x540E;&#x5B89;&#x88C5;&#x7F3A;&#x5931;&#x7684; npm&#xA0;&#x5305;&#xFF08;&#x53C2;&#x8003;&#x4E4B;&#x524D;&#x7684;<a href="http://www.cnblogs.com/Starts_2000/p/electron-vs2017-helloword.html" rel="nofollow" style="margin:0px;padding:0px;color:rgb(0,0,0);text-decoration:underline;" data-token="5df5d116f43c5ae6dcb394486fc10084">&#x6587;&#x7AE0;</a>&#xFF09;&#xFF0C;&#x6CE8;&#x610F;&#xFF0C;&#x5B89;&#x88C5; ffi npm &#x5305;&#x4E4B;&#x524D;&#x9700;&#x8981;&#x5B89;&#x88C5; python2.7&#xFF0C;&#x5426;&#x5219; ffi &#x4F1A;&#x7F16;&#x8BD1;&#x603B;&#x662F;&#x5931;&#x8D25;&#xFF0C;&#x5BFC;&#x81F4;&#x5B89;&#x88C5;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x5177;&#x4F53;&#x5B89;&#x88C5;&#x53C2;&#x8003;&#xFF1A;<a href="https://github.com/nodejs/node-gyp#installation" rel="nofollow" style="margin:0px;padding:0px;color:rgb(0,0,0);text-decoration:underline;" data-token="7ac2024ec4bab8b101ace67506d84962">https://github.com/nodejs/node-gyp#installation</a>&#x3002;</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5728; app.js &#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x884C;&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p><div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:&apos;Courier New&apos;;font-size:12px;"><pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:&apos;Courier New&apos;;">const ffi = require(&apos;ffi&apos;)</pre></div><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x7136;&#x540E;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#xFF0C;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><img src="https://images2015.cnblogs.com/blog/123424/201707/123424-20170721150609652-2122790288.png" alt style="padding:0px;border:none;max-width:800px;"></p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x53C2;&#x8003;&#x8D44;&#x6599;&#xFF1A;<a href="https://github.com/electron/electron/blob/master/docs-translations/zh-CN/tutorial/using-native-node-modules.md" rel="nofollow" style="margin:0px;padding:0px;color:rgb(0,0,0);text-decoration:underline;" data-token="37c275bdb834bc43442591ed95029061">https://github.com/electron/electron/blob/master/docs-translations/zh-CN/tutorial/using-native-node-modules.md</a>&#xFF0C;&#x539F;&#x6765;&#x662F;&#x9700;&#x8981;&#x628A; ffi &#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x4E3A;&#x9002;&#x5408; electron&#x7684;&#x6A21;&#x5757;&#x3002;</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x6253;&#x5F00; nodejs &#x547D;&#x4EE4;&#x884C;&#x7A97;&#x53E3;&#xFF0C;&#x5148;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p><div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:&apos;Courier New&apos;;font-size:12px;"><pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:&apos;Courier New&apos;;">set python=python&#x5B89;&#x88C5;&#x8DEF;&#x5F84;\python.exe</pre></div><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x8BBE;&#x7F6E; python &#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x5207;&#x6362;&#x5230;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p><div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:&apos;Courier New&apos;;font-size:12px;"><pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:&apos;Courier New&apos;;">&quot;<span style="margin:0px;padding:0px;line-height:1.5;">./node_modules/.bin/electron-rebuild</span>&quot; &quot;./node_modules/ffi&quot;</pre></div><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/123424/201707/123424-20170721153052605-1978820068.png" alt style="padding:0px;border:none;max-width:800px;"></span></p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#xFF0C;&#x6F02;&#x4EAE;&#x7684;&#x754C;&#x9762;&#x7EC8;&#x4E8E;&#x51FA;&#x73B0;&#x4E86;&#x3002;</p><h2 style="margin-top:20px;margin-bottom:20px;padding:0px;font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">&#x56DB;&#x3001;&#x4F7F;&#x7528; ffi &#x8C03;&#x7528; Widows API &#x89E3;&#x51B3;&#x4E00;&#x4E2A;&#x5C0F;&#x7F3A;&#x9677;</h2><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EFF; QQ &#x767B;&#x5F55;&#x754C;&#x9762;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x5C0F;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x662F;&#x9F20;&#x6807;&#x53F3;&#x952E;&#x70B9;&#x51FB;&#x7A97;&#x53E3;&#x7684;&#x4EFB;&#x610F;&#x5730;&#x65B9;&#xFF0C;&#x90FD;&#x4F1A;&#x5F39;&#x51FA;&#x7CFB;&#x7EDF;&#x83DC;&#x5355;&#xFF1A;</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><img src="https://images2015.cnblogs.com/blog/123424/201707/123424-20170721155933449-1978006863.png" alt style="padding:0px;border:none;max-width:800px;"></p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x73B0;&#x5728;&#x4F7F;&#x7528; ffi &#x8C03;&#x7528; user32.dll &#x4E2D;&#x7684;&#xA0;GetSystemMenu &#x51FD;&#x6570;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x9996;&#x5148;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A; user32.js &#x6587;&#x4EF6;&#xFF0C;&#x4E3A;&#x4E86;&#x5C55;&#x793A; ffi &#xFF0C;&#x6211;&#x591A;&#x5B9A;&#x4E49;&#x4E86;&#x51E0;&#x4E2A;API&#x51FD;&#x6570;&#xFF1A;</p><div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:&apos;Courier New&apos;;font-size:12px;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5;"><a title="&#x590D;&#x5236;&#x4EE3;&#x7801;" style="margin:0px;padding:0px;color:rgb(0,0,0);text-decoration:underline;border:none;"><img src="https://common.cnblogs.com/images/copycode.gif" alt="&#x590D;&#x5236;&#x4EE3;&#x7801;" style="margin-bottom:0px;padding:0px;max-width:800px;border:none;"></a></span></div><pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:&apos;Courier New&apos;;">const ffi = require(&apos;ffi&apos;<span style="margin:0px;padding:0px;line-height:1.5;">)

exports.User32 </span>= ffi.Library(&apos;user32&apos;<span style="margin:0px;padding:0px;line-height:1.5;">, {
    </span>&apos;GetWindowLongPtrW&apos;: [&apos;int&apos;, [&apos;int&apos;, &apos;int&apos;<span style="margin:0px;padding:0px;line-height:1.5;">]],
    </span>&apos;SetWindowLongPtrW&apos;: [&apos;int&apos;, [&apos;int&apos;, &apos;int&apos;, &apos;long&apos;<span style="margin:0px;padding:0px;line-height:1.5;">]],
    </span>&apos;GetSystemMenu&apos;: [&apos;int&apos;, [&apos;int&apos;, &apos;bool&apos;<span style="margin:0px;padding:0px;line-height:1.5;">]],
    </span>&apos;DestroyWindow&apos;: [&apos;bool&apos;, [&apos;int&apos;<span style="margin:0px;padding:0px;line-height:1.5;">]]
});</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5;"><a title="&#x590D;&#x5236;&#x4EE3;&#x7801;" style="margin:0px;padding:0px;color:rgb(0,0,0);text-decoration:underline;border:none;"><img src="https://common.cnblogs.com/images/copycode.gif" alt="&#x590D;&#x5236;&#x4EE3;&#x7801;" style="margin-bottom:0px;padding:0px;max-width:800px;border:none;"></a></span></div></div><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x4FEE;&#x6539; app.js &#x6587;&#x4EF6;&#xFF0C;&#x9996;&#x5148;&#x5BFC;&#x5165; user32.js&#xFF1A;</p><div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:&apos;Courier New&apos;;font-size:12px;"><pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:&apos;Courier New&apos;;">const user32 = require(&apos;./app/scripts/user32&apos;).User32</pre></div><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x7136;&#x540E;&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p><div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:&apos;Courier New&apos;;font-size:12px;"><pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:&apos;Courier New&apos;;">win.once(&apos;ready-to-show&apos;, () =&gt;<span style="margin:0px;padding:0px;line-height:1.5;"> {
        let hwnd </span>= win.getNativeWindowHandle() <span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">//</span><span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">&#x83B7;&#x53D6;&#x7A97;&#x53E3;&#x53E5;&#x67C4;&#x3002;</span>
        user32.GetSystemMenu(hwnd.readUInt32LE(0), <span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">true</span>); <span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">//</span><span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">&#x7981;&#x7528;&#x7CFB;&#x7EDF;&#x83DC;&#x5355;.</span>
<span style="margin:0px;padding:0px;line-height:1.5;">        win.show()
    })</span></pre></div><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#x518D;&#x8FD0;&#x884C;&#x9879;&#x76EE;&#xFF0C;&#x7CFB;&#x7EDF;&#x83DC;&#x5355;&#x5C31;&#x6D88;&#x5931;&#x7684;&#x65E0;&#x5F71;&#x65E0;&#x8E2A;&#x4E86;&#x3002;</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">&#xA0;</p><p style="margin:10px auto;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;color:rgb(255,0,0);"><span style="margin:0px;padding:0px;">&#x6700;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x90FD;&#x5DF2;&#x7ECF;&#x63D0;&#x4EA4;&#x5230;&#x4E86;github&#xFF1A;<a href="https://github.com/starts2000/ElectronQQLogin" rel="nofollow" style="margin:0px;padding:0px;color:rgb(0,0,0);text-decoration:underline;"><span style="margin:0px;padding:0px;color:rgb(255,0,0);">https://github.com/starts2000/ElectronQQLogin</span></a>&#xFF0C;&#x6B22;&#x8FCE;&#x83B7;&#x53D6;&#x3002;</span></span></p><br>                                    