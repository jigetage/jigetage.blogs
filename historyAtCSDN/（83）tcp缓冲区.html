
                                            <p>&#x4E00;&#x3001;&#x5148;&#x4E0A;&#x7ED3;&#x8BBA;</p>

<p>&#x4EC0;&#x4E48;&#x662F;tcp&#x7F13;&#x51B2;&#x533A;&#xFF1F;&#x6BCF;&#x4E2A; socket &#x88AB;&#x521B;&#x5EFA;&#x540E;&#xFF0C;&#x90FD;&#x4F1A;&#x5206;&#x914D;&#x4E24;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x8F93;&#x5165;&#x7F13;&#x51B2;&#x533A;&#x548C;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x533A;&#x3002;</p>

<p>&#x4E8C;&#x3001;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x610F;&#x4E49;<br>
write()/send() &#x5E76;&#x4E0D;&#x7ACB;&#x5373;&#x5411;&#x7F51;&#x7EDC;&#x4E2D;&#x4F20;&#x8F93;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x5148;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#xFF0C;&#x518D;&#x7531;TCP&#x534F;&#x8BAE;&#x5C06;&#x6570;&#x636E;&#x4ECE;&#x7F13;&#x51B2;&#x533A;&#x53D1;&#x9001;&#x5230;&#x76EE;&#x6807;&#x673A;&#x5668;&#x3002;&#x4E00;&#x65E6;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x51FD;&#x6570;&#x5C31;&#x53EF;&#x4EE5;&#x6210;&#x529F;&#x8FD4;&#x56DE;&#xFF0C;&#x4E0D;&#x7BA1;&#x5B83;&#x4EEC;&#x6709;&#x6CA1;&#x6709;&#x5230;&#x8FBE;&#x76EE;&#x6807;&#x673A;&#x5668;&#xFF0C;&#x4E5F;&#x4E0D;&#x7BA1;&#x5B83;&#x4EEC;&#x4F55;&#x65F6;&#x88AB;&#x53D1;&#x9001;&#x5230;&#x7F51;&#x7EDC;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;TCP&#x534F;&#x8BAE;&#x8D1F;&#x8D23;&#x7684;&#x4E8B;&#x60C5;&#x3002;<br>
TCP&#x534F;&#x8BAE;&#x72EC;&#x7ACB;&#x4E8E; write()/send() &#x51FD;&#x6570;&#xFF0C;&#x6570;&#x636E;&#x6709;&#x53EF;&#x80FD;&#x521A;&#x88AB;&#x5199;&#x5165;&#x7F13;&#x51B2;&#x533A;&#x5C31;&#x53D1;&#x9001;&#x5230;&#x7F51;&#x7EDC;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x5728;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x4E0D;&#x65AD;&#x79EF;&#x538B;&#xFF0C;&#x591A;&#x6B21;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x88AB;&#x4E00;&#x6B21;&#x6027;&#x53D1;&#x9001;&#x5230;&#x7F51;&#x7EDC;&#xFF0C;&#x6BD4;&#x5982;nagle&#x7B97;&#x6CD5;&#xFF0C;&#x8FD9;&#x53D6;&#x51B3;&#x4E8E;&#x5F53;&#x65F6;&#x7684;&#x7F51;&#x7EDC;&#x60C5;&#x51B5;&#x3001;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x662F;&#x5426;&#x7A7A;&#x95F2;&#x7B49;&#x8BF8;&#x591A;&#x56E0;&#x7D20;&#xFF0C;&#x4E0D;&#x7531;&#x7A0B;&#x5E8F;&#x5458;&#x63A7;&#x5236;&#x3002;<br>
read()/recv() &#x51FD;&#x6570;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x4E5F;&#x4ECE;&#x8F93;&#x5165;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x4ECE;&#x7F51;&#x7EDC;&#x4E2D;&#x8BFB;&#x53D6;&#x3002;</p>

<p><img alt class="has" src="http://c.biancheng.net/cpp/uploads/allimg/151018/1-15101Q60GV27.jpg"><br>
&#x56FE;&#xFF1A;TCP&#x5957;&#x63A5;&#x5B57;&#x7684;I/O&#x7F13;&#x51B2;&#x533A;&#x793A;&#x610F;&#x56FE;<br>
&#x4E09;&#x3001;I/O&#x7F13;&#x51B2;&#x533A;&#x7279;&#x6027;</p>

<p>1&#x3001;I/O&#x7F13;&#x51B2;&#x533A;&#x5728;&#x6BCF;&#x4E2A;TCP&#x5957;&#x63A5;&#x5B57;&#x4E2D;&#x5355;&#x72EC;&#x5B58;&#x5728;&#xFF1B;</p>

<p>2&#x3001;I/O&#x7F13;&#x51B2;&#x533A;&#x5728;&#x521B;&#x5EFA;&#x5957;&#x63A5;&#x5B57;&#x65F6;&#x81EA;&#x52A8;&#x751F;&#x6210;&#xFF1B;</p>

<p>3&#x3001;&#x5373;&#x4F7F;&#x5173;&#x95ED;&#x5957;&#x63A5;&#x5B57;&#x4E5F;&#x4F1A;&#x7EE7;&#x7EED;&#x4F20;&#x9001;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x9057;&#x7559;&#x7684;&#x6570;&#x636E;&#xFF1B;</p>

<p>4&#x3001;&#x5173;&#x95ED;&#x5957;&#x63A5;&#x5B57;&#x5C06;&#x4E22;&#x5931;&#x8F93;&#x5165;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x3002;</p>

<p><br>
&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x9ED8;&#x8BA4;&#x5927;&#x5C0F;&#x4E00;&#x822C;&#x90FD;&#x662F; 8K&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; getsockopt() &#x51FD;&#x6570;&#x83B7;&#x53D6;&#xFF1A;</p>

<pre class="has"><code>int servSock = socket(PF_INET, SOCK_STREAM, 0);
unsigned optVal;
int optLen&#xA0;=&#xA0;sizeof(int);
getsockopt(servSock, SOL_SOCKET, SO_SNDBUF,&#xA0;(char*)&amp;optVal,&#xA0;&amp;optLen);
printf(&quot;Buffer length: %d\n&quot;, optVal);</code></pre>

<p>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;<br>
Buffer length: 8192&#xA0;</p>                                    